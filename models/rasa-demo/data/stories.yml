version: "2.0"

stories:

########## 輸入start開始整個流程
- story: welcome
  steps:
  - intent: start
  - action: utter_welcome
  - intent: say_function
    entities:
    - function
  - action: fill_slot
  - checkpoint: reply_fill_slot

  
# 作業系統 slot_filling
- story: fill_slot_os
  steps:
  - checkpoint: reply_fill_slot
  - intent: say_os
    entities:
    - os
  - action: fill_slot
  - checkpoint: reply_fill_slot
  
  
# 程式語言 slot_filling
- story: fill_slot_pl
  steps:
  - checkpoint: reply_fill_slot
  - intent: say_pl
    entities:
    - pl
  - action: fill_slot
  - checkpoint: reply_fill_slot
  
# 使用者問題 slot_filling
- story: fill_slot_message
  steps:
  - checkpoint: reply_fill_slot
  - intent: say_question_or_error_message
    entities:
    - question_or_error_message
#  - action: utter_check_message
  - action: outer_search
  - checkpoint: check_continue_search

# 修改作業系統
- story: change_slot_os
  steps:
  - intent: change_os
  - action: utter_ask_os #這裡不能用fill_slot，因為本來就有值了
  - intent: say_os
    entities:
    - os
  - action: fill_slot
  - checkpoint: reply_fill_slot
  
# 修改程式語言
- story: change_slot_pl
  steps:
  - intent: change_pl
  - action: utter_ask_pl #這裡不能用fill_slot，因為本來就有值了
  - intent: say_pl
    entities:
    - pl
  - action: fill_slot
  - checkpoint: reply_fill_slot

- story: search_affirm
  steps:
  - checkpoint: check_continue_search
#  - action: utter_detect_stroy
  - intent: affirm
  - action: outer_search
  - checkpoint: check_continue_search

- story: search_deny
  steps:
  - checkpoint: check_continue_search
#  - action: utter_detect_stroy
  - intent: deny
  - action: utter_ask_satisfied
  - checkpoint: check_satisfied
  
- story: satisfied_affirm
  steps:
  - checkpoint: check_satisfied
  - intent: affirm
  #- action: utter_affirm_satisfied
  - action: utter_finish
  

- story: satisfied_deny
  steps:
  - checkpoint: check_satisfied
  - intent: deny
  #- action: utter_affirm_notsatisfied
  - action: utter_finish
